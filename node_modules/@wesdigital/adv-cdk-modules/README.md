# @wesdigital/adv-cdk-modules
This is a package of cdk constructs and helpers to let teams rapidly deploy AWS infrastructure with a set of 
sensible-defaults that comply with platform and security requirements.

## Lookups
The `/wesdigital` directory contains a number of useful lookups, like account and environment config.
For example, `wesDigitalVpc()` returns a VPC construct pre-filled with the vpc, subnet and az info necessary to
deploy a private resource.

## Constructs
So far we have constructs for:

- ECR repo
- EventBridge bus

In progress is a module for an ecs-fargate service.

## Using the module
The module is published in CodeArtifact. It's published on every push to main. This means:

- Every change to the repo (even just documentation etc) must increment at least the patch version in `package.json`
- The npm install in the client app must be done with a CodeArtifact login: 
  `aws codeartifact login --tool npm --repository webcommon --domain advantagepoc --domain-owner 345954686127 --namespace '@wesdigital'`

The app-sandpit power user v2 role and the app-sandpit cross-account deployer role are currently the only two roles 
authorised to do the login. 

## Useful commands

- `npm run build`   compile typescript to js.
- `npm run watch`   watch for changes and compile
- `npm run test`    perform the jest unit tests